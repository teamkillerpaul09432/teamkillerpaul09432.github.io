<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
</head>
<body>
  <h2>Login</h2>
  <input type="text" id="username" placeholder="Benutzername"><br>
  <input type="password" id="password" placeholder="Passwort"><br>
  <button onclick="login()">Anmelden</button>
  <p id="msg" style="color: red;"></p>
<script>
function login() {
  const user = document.getElementById("username").value;
  const pass = document.getElementById("password").value;

  const users = JSON.parse(localStorage.getItem("users") || "[]");

  // Fallback-Admin
  if (users.length === 0) {
    users.push({ username: "admin", password: "Paul2009", rank: "admin" });
    localStorage.setItem("users", JSON.stringify(users));
  }

  const found = users.find(u => u.username === user && u.password === pass);

  if (found) {
    localStorage.setItem("isLoggedIn", "true");
    localStorage.setItem("username", found.username);
    localStorage.setItem("rank", found.rank);
    window.location.href = "index.html";
  } else {
    document.getElementById("msg").innerText = "Falscher Benutzername oder Passwort!";
  }
}
</script>
</body>
</html>
